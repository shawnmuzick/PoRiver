import{buildProducts}from"./productLoop.js";const shop=document.getElementById("shop"),filters=document.querySelectorAll("input"),filterClose=document.getElementById("shop-filter-close"),filterOpen=document.getElementById("shop-filter-open"),filterContainer=document.getElementById("filter-container"),filterImg=document.getElementById("filter-image"),sortBtn=document.getElementById("sortBtn"),sort=document.getElementById("sort");let state=[...products];function filterProducts(filter,products){return null===filter?products:products.filter(p=>filter.includes(p.instrument.toLowerCase()))}function getFilters(elements=[]){let arr=[];return elements.forEach(f=>{!0===f.checked&&arr.push(f.name)}),0===arr.length?null:arr}buildProducts(state,shop),filters.forEach(f=>{f.addEventListener("click",()=>{let arr,filteredProducts=filterProducts(getFilters(filters),products);buildProducts(filteredProducts,shop)})}),filterClose.addEventListener("click",()=>{filterContainer.classList.contains("filter-container-hide")||(filterContainer.classList.add("filter-container-hide"),filterOpen.style.display="",filterImg.style.display="")}),filterOpen.addEventListener("click",()=>{filterContainer.classList.contains("filter-container-hide")&&(filterContainer.classList.remove("filter-container-hide"),filterOpen.style.display="none",filterImg.style.display="none")}),sortBtn.addEventListener("click",()=>{let arr,filteredProducts=filterProducts(getFilters(filters),state);"+"===sort.value?filteredProducts.sort((a,b)=>a.price>b.price?1:-1):"-"===sort.value?filteredProducts.sort((a,b)=>a.price<b.price?1:-1):"none"===sort.value&&(filteredProducts=[...products]),buildProducts(filteredProducts,shop)});